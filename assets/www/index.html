<?xml version="1.0" encoding="UTF-8"?>
<!--
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" manifest="cache.manifest">
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
    <head>
        <meta charset="utf-8" />
        <title>CUI-Miku</title>
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <link rel="stylesheet" href="css/default.css" type="text/css" media="all">
        <script type="text/javascript" charset="utf-8" src="cordova-1.8.1.js"></script>
        <script type="text/javascript" charset="utf-8" src="js/childbrowser.js"></script>
        <script type="text/javascript" charset="utf-8" src="js/SpeechRecognizer.js"></script>
        <script type="text/javascript" charset="utf-8" src="js/MorphologicalAnalysiser.js"></script>
        <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="js/jquery.flicksimple.js"></script>
        <script type="text/javascript" src="cui/core.js"></script>
        <script type="text/javascript" src="cui/simplebot.js"></script>
        <script type="text/javascript" src="cui/function.js"></script>
        <script type="text/javascript" src="cui/chara/miku/script.js"></script>
        <script type="text/javascript">
            $(function() {
                document.addEventListener("deviceready", function() {
                    Speech.onDeviceReady()
                    Location.onDeviceReady()
                    f2 = function() {
                        $.ajax({
                            type : "POST",
                            url : "https://accounts.google.com/o/oauth2/token",
                            data : {
                                client_id : "150899810974.apps.googleusercontent.com",
                                client_secret : "xZNP0yvUqP9Neul9dbF9m_9g",
                                redirect_uri : "http://localhost",
                                grant_type : "authorization_code",
                                code : '4/zAb7bJaHOJJaNW7fUU4t4WAgHSwL.go3EmT9zVIQdgrKXntQAax2-VmlScQI'
                            },
                            success : function(data) {
                                alert("hello")
                                console.log("access_token" + data["access_token"])
                                console.log("refresh_token" + data["refresh_token"])

                            },
                            error : function(jqXHR, textStatus, errorThrown) {
                                alert(jqXHR.responseText + 'textStatus: ' + textStatus + ', errorThrown: ' + errorThrown);
                            }
                        });

                    }
                    f = function() {
                        window.plugins.childBrowser.onLocationChange = function(loc) {
                            var code_match = loc.match(/\?code=(.+)$/)
                            if (code_match != null) {
                                var code2 = code_match[1]
                                window.plugins.childBrowser.close();
                                alert(code2)
                                console.log(code2)
                                $.ajax({
                                    type : "POST",
                                    url : "https://accounts.google.com/o/oauth2/token",
                                    data : {
                                        client_id : "150899810974.apps.googleusercontent.com",
                                        client_secret : "xZNP0yvUqP9Neul9dbF9m_9g",
                                        redirect_uri : "http://localhost",
                                        grant_type : "authorization_code",
                                        code : code2
                                    },
                                    success : function(data) {
                                        alert("hello")
                                        alert(data["access_token"])
                                    },
                                    error : function(jqXHR, textStatus, errorThrown) {
                                        alert(jqXHR.responseText + 'textStatus: ' + textStatus + ', errorThrown: ' + errorThrown);
                                    }
                                })
                            }

                        }
                        var url = "https://accounts.google.com/o/oauth2/auth?client_id=150899810974.apps.googleusercontent.com&redirect_uri=http%3A%2F%2Flocalhost&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcalendar&response_type=code"
                        window.plugins.childBrowser.showWebPage(url);
                    }
                }, false);
                $('#firstitem').flickSimple({
                    snap : "first"
                });
            })
        </script>
    </head>
    <body>
        <header>
            <a href='javascript:onHome()'><img id="home" src="cui/Droid.png" /></a>
            <a href='javascript:onNews()'><img id="rss" src="cui/RSS.png" /></a>
        </header>
        <a href='javascript:f()'>button</a>
        <div id="character"></div>
        <div id="yesButton" class="yesnoButton">
            OK
        </div>
        <div id="noButton" class="yesnoButton">
            NG
        </div>
    </body>
</html>
